define(["Ti/_/declare","Ti/_/Evented","Ti/Buffer","Ti/Filesystem"],function(e,t,n,i){return e("Ti.IOStream",t,{constructor:function(e){e=e||{},this._data=e.data||"",this._mode=e.mode||i.MODE_APPEND},close:function(){this._closed=!0},isReadable:function(){return!this._closed},isWriteable:function(){return!this._closed&&(this._mode===i.MODE_WRITE||this._mode===i.MODE_APPEND)},read:function(e,t,i){if(this.isReadable()){var r=this._data,o=i||r.length,a=e.append(new n({value:r.substring(t||0,o)}));return this._data=r.substring(o),a}return 0},write:function(e,t,n){if(this.isWriteable()){var i=e.value;return t=0|t,n=n||i.length,this._data+=i.substring(t,n),n-t}return 0}})});