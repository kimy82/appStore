define(["Ti/_/Evented","Ti/_/lang"],function(t,e){function n(t){if(!a){var e=localStorage.getItem(s);a=require.is(e,"String")&&JSON.parse(e)||{}}return t?a[t]:a}function r(t,r,i){var o=n(t);return void 0===o?e.val(i,null):l[r]?l[r](o):o}function i(t,e,r){t&&(n(),void 0===r||null===r?delete a[t]:a[t]=l[e]?l[e](r):r,localStorage.setItem(s,JSON.stringify(a)))}var o,a,s="ti:properties",l={Bool:function(t){return!!t},Double:function(t){return parseFloat(t)},Int:function(t){return parseInt(t)},List:function(t){return require.is(t,"Array")?t:[t]},Object:function(t){return t},String:function(t){return""+t}},u=e.setObject("Ti.App.Properties",t,{hasProperty:function(t){return!!n(t)},listProperties:function(){var t,e=n(),r=[];for(t in e)r.push(t);return r},removeProperty:function(t){i(t)}});for(o in l)(function(t){u["get"+t]=function(e,n){return r(e,t,n)},u["set"+t]=function(e,n){i(e,t,n)}})(o);return u});