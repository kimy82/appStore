define(["Ti/_/declare","Ti/_/UI/FontWidget","Ti/_/dom","Ti/_/css","Ti/_/style","Ti/_/lang","Ti/Locale","Ti/UI"],function(t,e,i,n,r,o,a,s){var u=r.set,l=i.unitize,c=2,d={post:"_setText"};return t("Ti.UI.Label",e,{constructor:function(){this._add(this._textContainer=s.createView({width:s.INHERIT,height:s.SIZE,center:{y:"50%"}}));var t=this,e=this._textContainerDomNode=this._textContainer.domNode;t._textContainer._getContentSize=function(i){var n=t._textContainerDomNode.innerHTML,r=t._measureText(n,e,t._hasSizeWidth()?void 0:i);return{width:r.width,height:r.height}},this._addStyleableDomNode(e),this.wordWrap=!0},_defaultWidth:s.SIZE,_defaultHeight:s.SIZE,_getText:function(){var t,e,i=0,n=0,r=a._getString(this.textid,this.text);if(void 0===r)return"";for(r+="";r.length>n;)if("	"===r[n]){var o="",s=c-e%c;for(t=0;s>t;t++)o+="&nbsp;";r=r.substring(0,n)+o+r.substring(n+1),n+=o.length,e+=s}else"\n"===r[n]?(r=r.substring(0,n)+"<br/>"+r.substring(n+1),n+=5,i=n,e=0):(n++,e++);return r.match(/<br\/>$/)&&(r+="&nbsp;"),r},_setText:function(){this._textContainerDomNode.innerHTML=this._getText(),this._triggerLayout()},_setTextShadow:function(){var t=this.shadowColor&&""!==this.shadowColor?this.shadowColor:void 0;u(this._textContainerDomNode,"textShadow",this.shadowOffset||t?(this.shadowOffset?l(this.shadowOffset.x)+" "+l(this.shadowOffset.y):"0px 0px")+" 0.1em "+o.val(t,"black"):"")},properties:{ellipsize:{set:function(t){return u(this._textContainerDomNode,"textOverflow",t?"ellipsis":"clip"),t},value:!0},html:{set:function(t){return this._textContainerDomNode.innerHTML=t,this._hasSizeDimensions()&&this._triggerLayout(),t}},shadowColor:{post:function(){this._setTextShadow()}},shadowOffset:{post:function(){this._setTextShadow()}},text:d,textAlign:{set:function(t){return u(this._textContainerDomNode,"textAlign",/(center|right)/.test(t)?t:"left"),t}},textid:d,wordWrap:{set:function(t){return u(this._textContainerDomNode,"whiteSpace",t?"normal":"nowrap"),t}},verticalAlign:{set:function(t){var e,i,n=this.center||{},r=this._textContainer;switch(t){case s.TEXT_VERTICAL_ALIGNMENT_TOP:e=0;break;case s.TEXT_VERTICAL_ALIGNMENT_CENTER:n.y="50%";break;case s.TEXT_VERTICAL_ALIGNMENT_BOTTOM:i=0}return r.top=e,r.center=n,r.bottom=i,t},value:s.TEXT_VERTICAL_ALIGNMENT_CENTER}}})});