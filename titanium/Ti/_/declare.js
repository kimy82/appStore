define(["Ti/_","Ti/_/lang"],function(t,e){function i(t,e){for(var i,n,o,a,u,c,h,d,_=[],f=[{cls:0,refs:[]}],g={},p=1,m=t.length,T=0;m>T;++T){if(o=t[T],!o)throw Error('Unknown base class for "'+e+'" ['+T+"]");if(s(o,"Object"))o=t[T]=r(o);else if(!s(o,"Function"))throw Error('Base class not a function for "'+e+'" ['+T+"]");for(n=o._meta?o._meta.bases:[o],a=0,i=n.length-1;i>=0;--i)u=n[i].prototype,u.hasOwnProperty("declaredClass")||(u.declaredClass="uniqName_"+l++),h=u.declaredClass,g.hasOwnProperty(h)||(g[h]={count:0,refs:[],cls:n[i]},++p),c=g[h],a&&a!==c&&(c.refs.push(a),++a.count),a=c;++a.count,f[0].refs.push(a)}for(;f.length;){for(a=f.pop(),_.push(a.cls),--p;d=a.refs,1==d.length;){if(a=d[0],!a||--a.count){a=0;break}_.push(a.cls),--p}if(a)for(T=0,m=d.length;m>T;++T)a=d[T],--a.count||f.push(a)}if(p)throw Error("Can't build consistent linearization for \""+e+'"');return o=t[0],_[0]=o?o._meta&&o===_[_.length-o._meta.bases.length]?o._meta.bases.length:1:0,_}function n(t,i){return function(){var n,r,o,a,u=arguments,l=u,d=u[0],_=t.length,f=this.declaredClass;if(f&&(c[f]||(c[f]=0),this.widgetId=f+":"+c[f]++),i&&(d&&d.preamble||this.preamble))for(a=Array(t.length),a[0]=u,r=0;(d=u[0])&&(n=d.preamble)&&(u=n.apply(this,u)||u),n=t[r].prototype,n=n.hasOwnProperty("preamble")&&n.preamble,n&&(u=n.apply(this,u)||u),++r!==_;)a[r]=u;for(r=_-1;r>=0;--r)n=t[r],o=n._meta,o&&(n=o.ctor,e.mixProps(this,o.hidden)),s(n,"Function")&&n.apply(this,a?a[r]:u);if(s(d,"Object")){n=this.constants;for(r in d)d.hasOwnProperty(r)&&((n&&r in n?n.__values__:this)[r]=d[r])}this.toString===h.toString&&(this.toString=function(){return"[object "+(f?f.replace(/\./g,""):"Object")+"]"}),n=this.postscript,n&&n.apply(this,l)}}function r(t){var e=Function();return u(e.prototype,t),e._meta={bases:[e],hidden:t},e}function o(t,e){for(var i in e)e.hasOwnProperty(i)&&!/^(constructor|properties|constants|__values__)$/.test(i)&&(s(e[i],"Function")&&(e[i].nom=name),t[i]=e[i]);return t}function a(t,a,l){s(t,"String")||(l=a,a=t,t=""),l=l||{};var c,d,_,f=[l.constructor],g=1,p={},m=s(a);if("Array"===m?(f=i(a,t),a=f[g=f.length-f[0]]):"Function"===m?(_=a._meta,f=f.concat(_?_.bases:a)):"Object"===m?f[1]=a=r(a):a=0,a)for(d=g-1;c=Function(),c.prototype=a.prototype,p=new c,d;--d)_=f[d],(_._meta?o:u)(p,_.prototype),c=Function(),c.superclass=a,c.prototype=p,a=p.constructor=c;return o(p,l),_=l.constructor,_!==h.constructor&&(_.nom="constructor",p.constructor=_),u(f[0]=c=n(f,_),{_meta:{bases:f,hidden:l,ctor:l.constructor},superclass:a&&a.prototype,extend:function(t){return o(this.prototype,t),this},prototype:p}),u(p,{constructor:c,isInstanceOf:function(t){for(var e=this.constructor._meta.bases,i=0,n=e.length;n>i;++i)if(e[i]===t)return!0;return this instanceof t}}),t&&(p.declaredClass=t,e.setObject(t,c)),c}var s=require.is,u=require.mix,l=0,c={},h=Object.prototype;return t.declare=a});