define(["Ti/_","Ti/_/browser","Ti/_/Evented","Ti/_/lang","Ti/Locale","Ti/_/dom","Ti/UI"],function(e,t,n,i,r,o,a){function s(){u||(u=1,l.cookie=c+"="+encodeURIComponent(h)+"; expires="+new Date(Date.now()+63072e7).toUTCString(),localStorage.setItem(c,h))}var u,l=document,c="ti:mid",d=l.cookie.match(RegExp("(?:^|; )"+c+"=([^;]*)")),h=d?decodeURIComponent(d[1]):void 0,f=require.on,p=o.create("iframe",{id:"urlOpener",style:{display:"none"}},l.body);h||(h=localStorage.getItem(c)),h||localStorage.setItem(c,h=e.uuid()),f(window,"beforeunload",s),f(window,"unload",s);var _=navigator,g=_.battery||_.webkitBattery||_.mozBattery,m=i.setObject("Ti.Platform",n,{canOpenURL:function(e){return!!e},createUUID:e.uuid,is24HourTimeFormat:function(){return!1},openURL:function(e){if(/^([tel|sms|mailto])/.test(e))p.contentWindow.location.href=e;else{var t=a.createWindow({layout:a._LAYOUT_CONSTRAINING_VERTICAL,backgroundColor:"#888"}),n=a.createButton({top:2,bottom:2,title:"Close"}),i=a.createWebView({width:a.FILL,height:a.FILL});n.addEventListener("singletap",function(){t.close()}),t.add(n),t.add(i),t.open(),setTimeout(function(){i.url=e},1)}},properties:{batteryMonitoring:!1},constants:{BATTERY_STATE_CHARGING:1,BATTERY_STATE_FULL:2,BATTERY_STATE_UNKNOWN:-1,BATTERY_STATE_UNPLUGGED:0,address:void 0,architecture:void 0,availableMemory:void 0,batteryLevel:function(){return this.batteryMonitoring&&g?100*g.level:-1},batteryState:function(){return this.batteryMonitoring&&g&&g.charging?this.BATTERY_STATE_CHARGING:this.BATTERY_STATE_UNKNOWN},isBrowser:!0,id:h,locale:r,macaddress:void 0,model:_.userAgent,name:"mobileweb",netmask:void 0,osname:"mobileweb",ostype:_.platform,runtime:t.runtime,processorCount:void 0,username:void 0,version:require.config.ti.version}});return g&&require.on(g,"chargingchange",function(){m.batteryMonitoring&&m.fireEvent("battery",{level:m.batteryLevel,state:m.batteryState})}),m});